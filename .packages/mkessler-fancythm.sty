\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{mkessler-fancythm}[2021/04/27 - Theorem-Environment Package]
%%%%%%%%m
%Provides fancy theorem-like-environments usedd in the write-ups of my lecture nots

\newif\ifenglish\englishtrue
\DeclareOption{english}{\englishtrue}
\DeclareOption{german}{\englishfalse}
\DeclareOption*{\PackageWarning{mkessler-fancythm}{Unknown '\CurrentOption'}}

\ProcessOptions\relax


%%(Optional) Options for layout of the environments
\RequirePackage{xkeyval}
\newcommand{\fancythmlinewidth}{2pt}
\newcommand{\fancythmskipabove}{8pt}

\DeclareOptionX{linewidth}{\renewcommand\fancythmlinewidth{#1}}
\DeclareOption{\fancythmskipabove}{\renewcommand{\fancythmskipabove}{#1}}
\DeclareOptionX*{\PackageWarning{mkessler-fancythm}{Unknown `\CurrentOption'}}% For unknown options

\ProcessOptionsX*\relax

%Theorem-environments
\RequirePackage{amsthm}
\RequirePackage{mdframed}
\RequirePackage{thmtools}
\RequirePackage[skins]{tcolorbox}
%\RequirePackage[usenames,svgnames,dvipsnames]{xcolor}
\mdfsetup{skipabove=\topskip,skipbelow=\topskip}

%%mdframed styles
\mdfdefinestyle{mdredmargin}{%
    skipabove =\fancythmskipabove,
    linecolor=red,
    linewidth = \fancythmlinewidth,
    leftmargin = 0cm,
    rightmargin=0cm,
    backgroundcolor=red!8,
    rightline=false,
    topline=false,
    bottomline=false
}

\mdfdefinestyle{mdorangemargin}{%
    skipabove =\fancythmskipabove,
    linecolor=orange,
    linewidth = \fancythmlinewidth,
    leftmargin = 0cm,
    rightmargin=0cm,
    backgroundcolor=orange!10,
    rightline=false,
    topline=false,
    bottomline=false
}

\mdfdefinestyle{mdbluemargin}{%
    skipabove =\fancythmskipabove,
    linecolor=blue,
    linewidth = \fancythmlinewidth,
    leftmargin = 0cm,
    rightmargin=0cm,
    backgroundcolor=blue!7,
    rightline=false,
    topline=false,
    bottomline=false
}

\mdfdefinestyle{mdgreenmargin}{%
    skipabove =\fancythmskipabove,
    linecolor=green!70!black,
    linewidth = \fancythmlinewidth,
    leftmargin = 0cm,
    rightmargin=0cm,
    rightline=false,
    topline=false,
    bottomline=false
}

\mdfdefinestyle{mdyellowmargin}{%
    skipabove =\fancythmskipabove,
    linecolor=yellow!80!orange,
    linewidth = \fancythmlinewidth,
    leftmargin = 0cm,
    rightmargin=0cm,
    rightline=false,
    topline=false,
    bottomline=false
}

\mdfdefinestyle{mdvioletmargin}{%
    skipabove =\fancythmskipabove,
    linecolor=violet,
    linewidth = \fancythmlinewidth,
    leftmargin = 0cm,
    rightmargin=0cm,
    backgroundcolor=violet!7,
    rightline=false,
    topline=false,
    bottomline=false
}


\mdfdefinestyle{mdredmarginbluefill}{%
    skipabove =\fancythmskipabove,
    linecolor=red,
    linewidth = \fancythmlinewidth,
    leftmargin = 0cm,
    rightmargin=0cm,
    backgroundcolor=blue!7,
    rightline=false,
    topline=false,
    bottomline=false
}

\declaretheoremstyle[
	mdframed={style=mdredmargin},
	postheadspace={0.3em},
    notefont=\mdseries
]{thmredmargin}

\declaretheoremstyle[
	mdframed={style=mdorangemargin},
	postheadspace={0.3em},
    notefont=\mdseries
]{thmorangemargin}

\declaretheoremstyle[
	mdframed={style=mdbluemargin},
	postheadspace={0.3em},
    notefont=\mdseries
]{thmbluemargin}


\declaretheoremstyle[
	mdframed={style=mdgreenmargin},
	postheadspace={0.3em},
    notefont=\mdseries
]{thmgreenmargin}

\declaretheoremstyle[
	mdframed={style=mdyellowmargin},
	postheadspace={0.3em},
    notefont=\mdseries
]{thmyellowmargin}

\declaretheoremstyle[
	mdframed={style=mdvioletmargin},
	postheadspace={0.3em},
    notefont=\mdseries
]{thmvioletmargin}


\declaretheoremstyle[
	mdframed={style=mdredmarginbluefill},
	postheadspace={0.3em},
    notefont=\mdseries
]{thmredmarginbluefill}

%Theorem
\declaretheorem[style=thmredmargin,name=\ifenglish Theorem\else Satz\fi,numberwithin=section]{theorem}

%Unnumbered Theorem
\declaretheorem[style=thmredmargin,name=\ifenglish Theorem\else Satz\fi,numbered=no]{theorem*}

%Proposition
\declaretheorem[style=thmredmargin,name=Proposition,sibling=theorem]{proposition}

%Unnumbered Proposition
\declaretheorem[style=thmredmargin,name=Proposition,numbered=no]{proposition*}

%Corollary
\declaretheorem[style=thmredmargin,name=\ifenglish Corollary\else Korollar\fi,sibling=theorem]{corollary}

%Unnumbered Corollary
\declaretheorem[style=thmredmargin,name=\ifenglish Corollary\else Korollar\fi,numbered=no]{corollary*}

%Lemma
\declaretheorem[style=thmorangemargin,name=Lemma,sibling=theorem]{lemma}

%Unnumbered Lemma
\declaretheorem[style=thmorangemargin,name=Lemma,,numbered=no]{lemma*}

%Definition
\declaretheorem[style=thmbluemargin,name=Definition]{definition}

%unnumbered Definition
\declaretheorem[style=thmbluemargin,name=Definition,numbered=no]{definition*}

%Theorem + Definition
\declaretheorem[style=thmredmarginbluefill,name=\ifenglish Theorem and Definition\else Satz und Definition\fi,sibling=theorem]{theoremdef}

%Notation
\declaretheorem[style=thmvioletmargin,name=Notation,numbered=no]{notation}

%Example
\declaretheorem[style=thmgreenmargin,name=\ifenglish Example\else Beispiel\fi,numbered=no]{example}

%Remark
\declaretheorem[style=thmyellowmargin,name=\ifenglish Remark\else Bemerkung\fi,numbered=no]{remark}



\newtcolorbox{recap}{before skip = 0.5cm, after skip = 0.5cm, enhanced, sharp corners = all, colback = white, colframe = gray, toprule=0pt, bottomrule=0pt, leftrule=0pt,rightrule=0pt, overlay = {
        \draw[gray, line width = 2pt] (frame.north west) -- ++(0.5cm, 0pt);
        \draw[gray, line width=2pt] (frame.south east) -- ++(-0.5cm, 0pt);
        \draw[gray, line width=2pt] (frame.north west) -- ++ (0pt, -0.5cm);
        \draw[gray, line width=2pt] (frame.south east) -- ++(0pt, 0.5cm);
}}
